{% extends "@BangpoundCastleSearch/layout.html.twig" %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets filter='cssrewrite' %}
    <link href="{{ asset_url }}" type="text/css" rel="stylesheet" />
    {% endstylesheets %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

{% form_theme form _self %}

{% block form_row %}
    {% spaceless %}
        <div class="form-group">
            {{ form_label(form) }}
            {{ form_errors(form) }}
            {{ form_widget(form) }}
        </div>
    {% endspaceless %}
{% endblock form_row %}

{%- block submit_widget -%}
    {% spaceless %}
        {% set type = type|default('submit') %}
        {{ block('button_widget') }}
    {% endspaceless %}
{%- endblock submit_widget -%}

{%- block button_widget -%}
    {% spaceless %}
        {% if label is empty %}
            {% set label = name|humanize %}
        {% endif %}
        <button type="{{ type|default('button') }}" {{ block('button_attributes') }}>{{ label|trans({}, translation_domain)|raw }}</button>
    {% endspaceless %}
{%- endblock button_widget -%}

{%- block navbar -%}
    {{- parent() -}}
<div class="global-search active">
	<div class="container">
    <div class="search-logo"><a href="http://r-shief.org"><img src="bundles/rshiefkal3a/images/r-shief-web.png" alt="R-Shief"></a></div>
    {{- form_start(form) -}}
    {% spaceless %}
        <div class="btn-group">
            <a class="search-info" title="Search Help" data-toggle="modal" data-target="#search-help">
                <i class="fa fa-question-circle"></i>
            </a>
        </div>
    {% endspaceless %}
        {{- form_errors(form) -}}
        {{- form_row(form.queryTerm) -}}
        {{- form_row(form.published_lower) -}}
        {{- form_row(form.published_upper) -}}
        {{- form_widget(form.search) -}}
    {{- form_end(form) -}}
    </div>
</div>
{%- endblock -%}

{% block header %}
    <h1 class="pagetitle">
        Search R-Shief
    </h1>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-12">
            {{ block('main') }}
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            {{ block('first_sidebar') }}
        </div>
        <div class="col-md-6">
            {{ block('second_sidebar') }}
        </div>
    </div>
{% endblock %}

{% block main %}
{% endblock %}

{% block first_sidebar %}
    {{ render_hinclude(controller('BangpoundCastleSearchBundle:Statistics:daily')) }}
    {{ render_hinclude(controller('BangpoundCastleSearchBundle:Statistics:hourly')) }}
{% endblock %}

{% block second_sidebar %}
    {{ render_hinclude(controller('BangpoundCastleSearchBundle:Statistics:collection')) }}
    {{ render_hinclude(controller('BangpoundCastleSearchBundle:Statistics:topTag', {'title': 'Today', 'body': 'Top tags for today', 'start': date('now') | date('Y-m-d'), 'end': date('-1 day') | date('Y-m-d')})) }}
    {{ render_hinclude(controller('BangpoundCastleSearchBundle:Statistics:topTag', {'title': 'Yesterday', 'body': 'Top tags for yesterday', 'start': date('-1 day') | date('Y-m-d'), 'end': date('-2 day') | date('Y-m-d')})) }}
{% endblock %}
